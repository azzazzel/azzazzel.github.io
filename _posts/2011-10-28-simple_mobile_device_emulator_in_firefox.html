---
layout: post
title: Simple mobile device emulator in Firefox
date: '2011-10-28 01:22:12 +0200'
mt_id: 21
blog_id: 1
post_id: 21
basename: simple_mobile_device_emulator_in_firefox
categories:
- tips_and_tricks
- software
---
<p>After my &quot;Pluggable mobile device detection&quot; presentation during <a href="http://www.liferay.com/events/liferay-symposiums/europe-2011/agenda">Liferay Europe Symposium</a>&nbsp;a lot of people asked about the mobile device emulator I was using. The truth is, it's not a real &quot;emulator&quot; but a simple combination of html page and a Firefox user script. However, it does the trick and for most people seems to be good enough (at least for a start). So, I made a promise to share it and finally found the time to blog about it.</p>

<!--more-->

<p>But&nbsp;before I go into details, here is a short video which demonstrates what it does (for those of you who didn't attend Liferay Europe Symposium and have no idea what I'm writing about):</p> <p><iframe width="560" height="315" src="http://www.youtube.com/embed/__gvtlJ-KLI" frameborder="0" allowfullscreen=""></iframe></p> <p><br /> Now the details. First, make sure you have recent Firefox version installed. You'll also need one of the following Firefox extensions:</p> <ul>     <li><a href="http://scriptish.org/">Scriptish</a>&nbsp;</li>     <li><a href="https://addons.mozilla.org/pl/firefox/addon/greasemonkey/">Greasemonkey</a>&nbsp;</li> </ul> <p><i>NOTE: I've only tested it with Scriptish but it should work with Greasemonkey as well.</i>  <br /> <br /> Having this in place you are ready to &quot;<i>install</i>&quot; the emulator. It's source code is available on <a href="https://github.com/azzazzel/phone_emulator">GitHub</a>. The <span style="font-family: 'Courier New'; ">page</span>&nbsp;folder contains the host page together with required js, css and image files. I personally have  <a href="http://httpd.apache.org/">Apache</a> running locally on my machine so I have these files in its <span style="font-family: 'Courier New'; ">&lt;DocumentRoot&gt;</span> and access the emulator via <a href="http://localhost/phone_emulator.html">http://localhost/phone_emulator.html</a>. However feel free to use any HTTP server you like (it may even work if you simply put it into a folder and access it via <a href="file:///path/to/folder/phone_emulator.html">file:///path/to/folder/phone_emulator.html</a>).<br /> <br /> The HTML file provides the GUI:</p>   <ul><li>the URL text box</li><li>the device tabs (it uses <a href="http://www.barelyfitz.com/projects/tabber/">tabifier library</a> to create the tabs from <span style="font-family: 'Courier New'; ">div</span> elements)</li><li>the background image and the&nbsp;<span style="font-family: 'Courier New'; ">iframe</span>&nbsp;element for each device</li></ul><p>If you wish to add more devices simply</p>  <ul><li>add the following code replacing <span style="font-family: 'Courier New'; ">${...} </span>with appropriate values<br /><code class="block">&lt;div class=&quot;device&quot; title=&quot;<b>${TEXT TO BE DISPLAYED IN THE TAB}</b>&quot;&gt;<br />&nbsp; &nbsp;&lt;div id=&quot;<b>${UNIQUE DEVICE ID}</b>&quot;&gt;<br />&nbsp; &nbsp; &nbsp; &lt;input <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;type=&quot;hidden&quot; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;class=&quot;deviceUA&quot; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;id=&quot;<b>${UNIQUE DEVICE ID}</b>_ua&quot; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;value=&quot;<b>${DEVICE'S USER AGENT STRING}</b>&quot; /&gt;<br />&nbsp; &nbsp; &nbsp; &lt;iframe <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;class=&quot;deviceResult&quot; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;id=&quot;<b>${UNIQUE DEVICE ID}</b>_result&quot;&gt;&lt;/iframe&gt;<br />&nbsp; &nbsp;&lt;/div&gt;<br />&lt;/div&gt;</code></li><li>add appropriate CSS styles to display the background image and position the iframe</li></ul><p><span class="Apple-style-span">Finally, you need to install the <a href="https://github.com/azzazzel/phone_emulator/raw/master/userscript/phone_emulator.user.js">user script</a>. Its purpose is to omit &quot;same origin&quot; policy and load requested URL in every available <span style="font-family: 'Courier New'; ">iframe</span>, each time changing the <span style="font-family: 'Courier New'; ">User-Agent</span> header appropriately. The scripts is by default hooked to&nbsp;</span><a style="text-decoration: none; " href="http://localhost/phone_emulator.html">http://localhost/phone_emulator.html</a><span class="Apple-style-span">&nbsp;location and will not run if you have placed the HTML file somewhere else. However you may edit the&nbsp;<br />     <code class="block">// @include        http://localhost/phone_emulator.html* </code>line and provide one or more different locations.<br />     <br />     This is it! Just type&nbsp;</span><a style="text-decoration: none; " href="http://localhost/phone_emulator.html">http://localhost/phone_emulator.html</a>&nbsp;<span class="Apple-style-span">in Firefox and you should have the emulator runnig. To make sure you have installed it correctly, check the little green&nbsp;</span><a href="http://scriptish.org/">Scriptish</a>&nbsp;ic<span class="Apple-style-span">on in Firefox's status bar. It should say that 1 user script is enabled.&nbsp;</span></p><p><span class="Apple-style-span">     <br />     <u><b>Disclaimer</b></u>:<br />     <b><i>This is not a real emulator and should not be used as such. It was NOT tested and is known to have at least the following issues/limitations:</i></b><br />                    </span></p><ul><li>the rendering is done by Firefox which may support a lot more features then actual device's browser</li><li>it only emulates the page in the provided location. If you click on a link it the emulator it will be loadded using standard Firefox&nbsp;<span class="Apple-style-span" style="font-family: 'Courier New'; ">User-Agent&nbsp;</span>header!</li><li>some Javascripts (particularly Google APIs) and/or CSS may cause conflicts and not display properly</li></ul><p>You've been warned, use it on your own risk ;) And of course if you feel you can make it better, extend it or build something else on top of it, go ahead and do so (just let me know).</p><p>&nbsp;</p><p>&nbsp;</p>
